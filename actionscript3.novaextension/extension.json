{
    "identifier": "com.abattoirsoftware.actionscript3",
    "name": "ActionScript 3",
    "organization": "",
    "description": "ActionScript & MXML language extension for Panic Nova. LSP powered directly from Bowler Hat LLC's vscode-as3mxml. Develop apps for Adobe AIR, Adobe Flash Player, or Apache Royale.",
    "version": "0.5.1",
    "categories": [
        "completions",
        "issues",
        "languages",
        "tasks"
    ],

    "main": "main.js",

    "entitlements": {
        "process": true,
        "filesystem": "readwrite"
    },

    "activationEvents": [
        "onLanguage:as3",
        "onLanguage:actionscript",
        "onLanguage:actionscript3",
        "onLanguage:mxml",
        "onWorkspaceContains:**/asconfig.json",
        "onWorkspaceContains:**/asconfig.*.json",
        "onWorkspaceContains:.actionScriptProperties",
        "onWorkspaceContains:*.as3proj",
        "onView:actionScriptSourcePaths",
        "onCommand:as3mxml.organizeImportsInUri",
        "onCommand:as3mxml.organizeImportsInDirectory",
        "onCommand:as3mxml.removeUnusedImportsInUri",
        "onCommand:as3mxml.addMissingImportsInUri",
        "onCommand:as3mxml.sortImportsInUri",
        "onCommand:as3mxml.saveSessionPassword",
        "onCommand:as3mxml.selectWorkspaceSDK",
        "onCommand:as3mxml.restartServer",
        "onCommand:as3mxml.importFlashBuilderProject",
        "onCommand:as3mxml.importFlashDevelopProject",
        "onCommand:as3mxml.quickCompile",
        "onCommand:as3mxml.quickCompileAndDebug",
        "onCommand:as3mxml.quickCompileAndRun",
        "onCommand:as3mxml.getActiveProjectURIs"
    ],

    "taskTemplates": {
        "actionscript": {
            "name": "ActionScript - AIR",
            "image": "Adobe_AIR_logo.svg.png",
            "description": "Build and run AS3 or MXML project.",
            "persistent": true,
            "tasks": {
                "build": {
                    "resolve": "actionscript",
                    "data": {
                        "type": "actionscript",
                    }
                },
                "clean": {
                    "resolve": "actionscript",
                    "data": {
                        "type": "actionscript",
                    }
                },
                "run": {
                    "resolve": "actionscript",
                    "data": {
                        "type": "actionscript",
                    }
                },
            },
            "config": [
                {
                    "key": "actionscript3.mainApplicationPath",
                    "title": "Main application file",
                    "type": "string",
                },
                {
                    "key": "actionscript3.exportname",
                    "title": "Name of SWF",
                    "type": "string",
                },
                {
                    "key": "actionscript3.appxml",
                    "title": "Name of APP XML",
                    "type": "string",
                    "placeholder": "This would be FB's .project <projectDescription><name></projectDescription>",
                    "default": ""
                },
                {
                    "key": "actionscript3.request",
                    "title": "Launch Type",
                    "type": "enum",
                    "default": "release",
                    "values": [
                        ["release", "Release"],
                        ["debug", "Debug"]
                    ],
                    "description": "How to run the project..."
                },
                {
                    "key": "actionscript3.copyassets",
                    "title": "Copy Assets",
                    "type": "bool",
                    "default": "true"
                },
                {
                    "key": "actionscript3.destdir",
                    "title": "Destination Dir",
                    "type": "path",
                    "default": "bin-me/"
                },
                {
                    "key": "actionscript3.sourceDirs",
                    "title": "Source Dirs",
                    "type": "pathArray",
                    "default": "src/"
                },
                {
                    "key": "actionscript3.libpath",
                    "title": "Lib Dirs",
                    "type": "pathArray",
                    "default": "libs/"
                },
                {
                    "key": "actionscript3.additionalCompilerArguments",
                    "title": "Additional Compiler",
                    "type": "string",
                    "default": ""
                }
            ]
        }
    },

    "config": [
        {
            "title": "Language Server",
            "type": "section",
            "children": [
                {
                    "key": "as3mxml.language-server-path",
                    "title": "Language Server Path",
                    "type": "path",
                    "allowFolders": true,
                    "allowFiles": false,
                    "placeholder": "Use built-in AS3MXML LSP",
                    "description": "Path to the AS3MXML LSP, if blank, it will used the bundled LSP."
                },
                {
                    "key": "as3mxml.languageServer.jvmargs",
                    "title": "JVM Args",
                    "type": "string",
                    "placeholder": "-Xms512m -Xmx1024m",
                    "description": "(Advanced) Specifies extra arguments that asconfigc will pass to the Java virtual machine when launching the language server (code intelligence).\n\nThe following example customizes the Java memory heap size for the code intelligence: \"-Xms512m -Xmx1024m\""
                },
                {
                    "key": "as3mxml.languageServer.concurrentRequests",
                    "title": "Concurrent Requests",
                    "type": "bool",
                    "default": true,
                    "description": "(Advanced) Specifies if requests to the language server will be processed concurrently or in a queue. Disabling concurrency will result in slower code intelligence, but it may be more stable if code intelligence stops working."
                }
            ]
        },
        {
            "title": "Java",
            "type": "section",
            "children": [
                {
                    "key": "as3mxml.java.path",
                    "title": "Java Path",
                    "type": "path",
                    "placeholder": "/usr/bin/java",
                    "description": "(Advanced) If the extension cannot find Java automatically, this setting may be used to specify the exact path to the java executable that the extension should use (Note: it must be an executable, and not directory)."
                }
            ]
        },
        {
            "title": "SDKs",
            "type": "section",
            "children": [
                {
                    "key": "as3mxml.sdk.default",
                    "title": "Default AIR SDK path",
                    "allowFolders": true,
                    "allowFiles": false,
                    "type": "path",
                    "default": "~/Applications/AIRSDK/",
                },
                {
                    "key": "as3mxml.sdk.searchPaths",
                    "title": "SDK Search Paths",
                    "allowFolders": true,
                    "allowFiles": false,
                    "type": "pathArray",
                    "placeholder": "",
                    "description": "Specifies a folder path containing one or more SDKs to add as custom options in the SDK picker."

                },
                {
                    "key": "as3mxml.sdk.animate",
                    "title": "Adobe Animate executable",
                    "type": "path",
                    "placeholder": "",
                    "description": "Specifies the absolute path of the Adobe Animate executable"
                },
                {
                    "key": "as3mxml.sdk.editor",
                    "title": "Editor SDK path",
                    "type": "path",
                    "allowFolders": true,
                    "allowFiles": false,
                    "default": "/Applications/AIRSDK/",
                    "description": "(Advanced) Specifies the folder path of the Apache Royale SDK used internally by the extension to provide code intelligence features. Unless you know what you're doing, you should probably set as3mxml.sdk.framework instead.\n\nIf you are working on a project that uses a nightly build of Apache Royale, you may be required to specify the as3mxml.sdk.editor setting to avoid compiler errors. Sometimes, new versions of Royale add new compiler options that older versions of compiler may not recognize."
                },
            ]
        },
        {
            "title": "ASConfig Options...",
            "type": "section",
            "children": [
                {
                    "key": "as3mxml.asconfigc.useBundled",
                    "title": "Use Bundled",
                    "type": "boolean",
                    "default": true,
                    "description": "(Advanced) Indicates if the extension will use the bundled version of asconfigc or a different version that is installed on the system path. Defaults to true.\n\nIf you have the npm version of asconfigc installed globally, and you'd prefer to use that version of the program instead of the version that is bundled with the Nova Panic extension, change the value of this setting to false."
                },
                {
                    "key": "as3mxml.asconfigc.verboseOutput",
                    "title": "Verbose Output",
                    "type": "boolean",
                    "default": true,
                    "description": "(Advanced) Specifies whether asconfigc will display more detailed output during builds. Displays command line options passed to tools, like the compiler and the Adobe AIR packager, lists the files copied to the output folder, and more."
                },
                {
                    "key": "as3mxml.asconfigc.jvmargs",
                    "title": "JVMArgs",
                    "type": "string",
                    "placeholder": "-Xms512m -Xmx1024m",
                    "description": "(Advanced) Specifies extra arguments that asconfigc will pass to the Java virtual machine when running Java programs.\n\nThe following example customizes the Java memory heap size for builds: \"-Xms512m -Xmx1024m\""
                }
            ]
        },
        {
            "title": "Additional Options...",
            "type": "section",
            "children": [
                {
                    "key": "as3mxml.projectImport.prompt",
                    "title": "Adobe Flash Builder project import prompt",
                    "type": "boolean",
                    "default": true,
                    "description": "Specifies whether to automatically display a prompt to import a project folder from Adobe Flash Builder when asconfig.json is not present."
                },
                {
                    "key": "as3mxml.quickCompile.enabled",
                    "title": "Quick Compile enabled",
                    "type": "boolean",
                    "default": true,
                    "description": "Specifies whether the experimental quick compile commands are enabled or not."
                }
            ]
        }
    ],

    "configWorkspace": [
        {
            "title": "Application",
            "type": "section",
            "description": "Select the main ActionScript or MXML",
            "children": [
                {
                    "key": "as3.application.runnable",
                    "title": "Main application",
                    "type": "path",
                    "allowFolders": false,
                    "allowFiles": true,
					"filetype": [ "as","mxml" ]
                }
            ]
        },
        {
            "title": "Build Path",
            "type": "section",
            "children": [
                {
                    "key": "as3.build.source.main",
                    "title": "Main source folder",
                    "type": "path",
                    "allowFolders": true,
                    "allowFiles": false,
                    "default": "src"
                },
                {
                    "key": "as3.build.outfile",
                    "title": "Output folder",
                    "type": "path",
                    "allowFolders": true,
                    "allowFiles": false,
                    "default": "bin-debug"
                },
                {
                    "title": "Source path",
                    "type": "section",
                    "description": "Additional source folders outside of the main source folder",
                    "children": [
                        {
                            "key": "as3.build.source.additional",
                            "title": "Additional source path",
                            "type": "pathArray",
                            "allowFolders": true,
                            "allowFiles": false
                        }
                    ]
                },
                {
                    "title": "Library Path",
                    "type": "section",
                    "description": "Additonal library folders (* May need some work...)",
                    "children": [
						{
							"key": "as3.build.linkage",
							"title": "Framework linkage",
							"type":  "enum",
							"values": [
								["default", "Use default (merged into code)"],
								["merge", "Merge into code"]
							],
							"default": "default",
						},
                        {
                            "key": "as3.build.source.additional",
                            "title": "Build path libraries",
                            "type": "pathArray",
                            "allowFolders": true,
                            "allowFiles": true
                        },
                        {
                            "key": "as3.build.addSWCFolder",
                            "title": "Add SWC Folder...",
                            "type": "command"
                        },
                        {
                            "key": "as3.build.addSWC...",
                            "title": "Add SWC",
                            "type": "command"
                        },
						{
							"type": "separator"
						},
						{
							"key": "as3.build.verifyRSL",
							"title": "Verify RSL digests (recommended for production)",
							"type": "boolean",
							"default": true,
						},
						{
							"key": "as3.build.removeRSL",
							"title": "Remove unused RSLs",
							"type": "boolean",
							"default": true,
						},
						{
							"key": "as3.build.localDebugRuntime",
							"title": "Use local debug runtime shared libraries when debugging",
							"type": "boolean",
							"default": true,
						},
						{
							"key": "as3.build.autoOrder",
							"title": "Automatically determine library ordering based on dependencies",
							"type": "boolean",
							"default": true,
						}
                    ]
                },
                {
                    "title": "Native Extensions",
                    "type": "section",
                    "description": "ActionScript Native Extensions (ANE) allow you to incorporate native platform capabilities into your applications and use them like stnadard libraries",
                    "children": [
                        {
                            "key": "as3.build.anes",
                            "title": "Native extensions",
                            "type": "pathArray",
                            "allowFolders": false,
                            "allowFiles": true
                        },
                        {
                            "key": "as3.packaging.certificateCreate",
                            "title": "Add ANE",
                            "type": "command"
                        },
                        {
                            "key": "as3.packaging.certificateCreate",
                            "title": "Add Folder",
                            "type": "command"
                        },
                        {
                            "key": "as3.packaging.certificateCreate",
                            "title": "Refresh",
                            "type": "command"
                        },
                    ]
                }
            ]
        },
        {
            "title": "Compiler",
            "type": "section",
            "children": [
                {
                    "title": "Flex SDK version",
                    "type": "section",
                    "children": [
                        {
                            "key": "as3.compiler.useDefault",
                            "title": "Use default SDK",
                            "type": "enum",
                            "values": [ "Use default SDK","Use a specific SDK"],
                            "default": "Use default SDK",
                            "description": "Specifies the folder path of the ActionScript SDK used by the current workspace. Supports the Adobe AIR SDK & Compiler, Apache Royale, the classic Apache Flex or Adobe Flex SDKs, and the Feathers SDK."
                        },
                        {
                            "key": "as3.compiler.specificSdk",
                            "title": "Use a specific SDK",
                            "type": "path",
                            "allowFolders": true,
                            "allowFiles": false,
                            "placeholder": "If empty, defaults the one specified in the extention's preferences"
                        }
                    ]
                },
                {
                    "title": "Options",
                    "type": "section",
                    "children": [
                        {
                            "key": "as3.compiler.copy",
                            "title": "Copy non-embedded files to output folder",
                            "type": "bool",
                            "default": true
                        },
                        {
                            "key": "as3.compiler.generateAccessable",
                            "title": "Generate accessible SWF file",
                            "type": "bool",
                            "default": false
                        },
                        {
                            "key": "as3.compiler.strict",
                            "title": "Enable strict type checking",
                            "type": "bool",
                            "default": true
                        },
                        {
                            "key": "as3.compiler.enableWarnings",
                            "title": "Enable warnings",
                            "type": "bool",
                            "default": true
                        },
                        {
                            "key": "as3.compiler.additional",
                            "title": "Additional compiler arguments",
                            "type": "text",
                        }
                    ]
				}
			]
        },
        {
            "title": "Packaging",
            "type": "section",
            "children": [
                {
                    "key": "as3.packaging.certificate",
                    "title": "Certificate",
                    "type": "path",
                    "allowFolders": false,
                    "allowFiles": true,
                    "description": "Select the .p12 file to build your AIR app with",
					"note": "@TODO Need to see how to implement a UI for this...",
					"comment": [
                		{
                    		"key": "as3.packaging.certificateCreate",
                    		"title": "Create",
                    		"type": "command"
                		},
					]
                },
                {
                    "key": "as3.packaging.includeFiles",
                    "title": "Included files",
                    "type": "pathArray",
                    "allowFolders": true,
                    "allowFiles": true
                },
                {
                    "key": "as3.packaging.anes",
                    "title": "Native extensions",
                    "description": "ActionScript Native Extensions (ANE) allow you to incorporate native platform capabilities into your application and use them like standard libraries",
                    "type": "pathArray",
                    "allowFolders": false,
                    "allowFiles": true,
                    "comment": "This should really show a list of the ANE Details, checkbox if it's used, checkbox if you want to package"
                }
            ]
        },
        {
            "title": "Modules",
            "type": "section",
            "description": "Specify the modules to build for this project (Not sure how to handle this, but it was in FB 4.6...)",
            "children": [
                {
                    "key": "as3.modules.list",
                    "title": "Modules",
                    "type": "pathArray",
                    "allowFolders": false,
                    "allowFiles": true,
                }
            ]
        }
    ],

    "commands": {
        "files": [
            {
                "title": "New ActionScript file",
                "command": "as3mxml.newActionScriptFile"
            }
        ],
        "editor": [
            {
                "title": "Add Import",
                "command": "as3mxml.addImport"
            },
            {
                "title": "Add MXML Namespace",
                "command": "as3mxml.addMXMLNamespace"
            },
            {
                "title": "Organize Imports In Uri",
                "command": "as3mxml.organizeImportsInUri"
            },
            {
                "title": "Organize Imports In Directory",
                "command": "as3mxml.organizeImportsInDirectory"
            },
            {
                "title": "Add Missing Imports In Uri",
                "command": "as3mxml.addMissingImportsInUri"
            },
            {
                "title": "Remove Unused Imports In Uri",
                "command": "as3mxml.removeUnusedImportsInUri"
            },
            {
                "title": "Sort Imports In Directory",
                "command": "as3mxml.sortImportsInUri"
            },
            {
                "title": "Quick Compile",
                "command": "as3mxml.quickCompile"
            },
            {
                "title": "Get Active Project URIs",
                "command": "as3mxml.getActiveProjectURIs"
            },
            {
                "title": "Get Library Definition Text",
                "command": "as3mxml.getLibraryDefinitionText"
            }
        ],
        "extensions": [
            {
                "title": "Restart AS3MXML LSP",
                "command": "as3mxml.restart"
            },
            {"separator": true},
            {
                "title": "Import FlashBuilder settings",
                "command": "actionscipt.checkFBProject"
            },
            {"separator": true},
            {
                "title": "ActionScript 3 Reference",
                "command": "actionscipt.as3reference"
            },
            {"separator": true},
            {"separator": true},
            {
                "title": "HOVER TEST!!",
                "command": "as3mxml.hovertest"
            },
            {
                "title": "CODE ACTION!!",
                "command": "as3mxml.codeaction"
            },
            {
                "title": "DOCUMENT SYMBOLS!!",
                "command": "as3mxml.documentsymbols"
            }
        ]
    }
}
